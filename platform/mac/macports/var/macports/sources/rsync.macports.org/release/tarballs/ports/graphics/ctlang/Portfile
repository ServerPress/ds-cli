# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 140595 2015-09-26 12:30:49Z mcalhoun@macports.org $

PortSystem           1.0
PortGroup            github 1.0
PortGroup            cmake 1.0

github.setup         ampas CTL 1.5.2 ctl-
name                 ctlang
categories           graphics lang
# the license is a GPL incompatible BSD Variant
# see https://fedoraproject.org/wiki/Licensing:BSD?rd=Licensing/BSD
license              AMPAS
maintainers          mcalhoun openmaintainer
description          Programming language for digital color management
long_description     The Color Transformation Language, or CTL, is a programming language for digital color management.
platforms            darwin

checksums            rmd160  b70e9b44e70efc898b48d85d1a2f6938a0dae404 \
                     sha256  6d71e15a2b10531d4539536238ea832b7ed4081ebb7c47e4799c973eb87dcfed

# see http://git.pld-linux.org/gitweb.cgi/packages/ctl.git/commitdiff/b49ac05c5d17f146cc913ba2e64b72b68e77cbd0
patchfiles           patch-OpenEXR_CTL.pc.in.diff

depends_build-append     \
    port:pkgconfig
depends_lib-append       \
    port:openexr         \
    port:aces_container  \
    port:tiff

post-destroot {
    # prevent mtree violations
    xinstall -m 755 -d ${destroot}${prefix}/share/doc
    file rename ${destroot}${prefix}/doc/CTL ${destroot}${prefix}/share/doc/${name}

    xinstall -m 644 -W ${worksrcpath} AUTHORS CHANGELOG LICENSE ${destroot}${prefix}/share/doc/${name}
}
