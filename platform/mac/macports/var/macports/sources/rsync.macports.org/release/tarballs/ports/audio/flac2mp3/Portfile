# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 138742 2015-07-17 23:32:37Z devans@macports.org $

PortSystem          1.0

name                flac2mp3

version             20041223
revision            3

categories          audio
platforms           darwin
license             GPL-2
supported_archs     noarch
maintainers         nomaintainer

description         Script to convert flac audio files to mp3.
long_description    $description

homepage            https://www.gurulabs.com/goodies/downloads/#FLAC-to-MP3

master_sites        http://www.gurulabs.com/downloads

checksums           rmd160  eb5d32d163f217ccbd5c2c969159486adcf922be \
                    sha256  c01128e292f896b7e9e1a29a66eecb1bc7b35c9b0c0313a64760138fd8af6ac4

distname            ${name}

# set pbranch to desired perl version
# currently 5.22 (#48365)

set pbranch         5.22

depends_run         port:flac \
                    port:lame \
                    port:p${pbranch}-mp3-info

extract.suffix      .pl
extract.only

use_configure       no

build               {}

destroot {
    xinstall ${distpath}/${name}${extract.suffix} ${destroot}${prefix}/bin
    reinplace "s|#!/usr/bin/perl|#!${prefix}/bin/perl${pbranch}|g" \
        "${destroot}${prefix}/bin/${name}${extract.suffix}"
}
