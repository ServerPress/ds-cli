# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 136054 2015-05-11 14:00:12Z mf2k@macports.org $

PortSystem          1.0
PortGroup           perl5 1.0

perl5.branches      5.16 5.18 5.20
perl5.setup         MeCab 0.996
categories-append   textproc japanese
maintainers         hum openmaintainer

description         a Perl module for MeCab
long_description    ${description}

master_sites        googlecode:mecab
checksums           rmd160  0fb41c1a8bbc15da0283f649a17fd227fde3756f \
                    sha256  71fe5559c5bd2a13ea9929190a8f9f5ee4c63987108081bd7332ca1bbbb616c9

homepage            http://mecab.sourceforge.net/
platforms           darwin
license             {GPL LGPL BSD}

distname            mecab-perl-${perl5.moduleversion}
dist_subdir         mecab

if {${perl5.major} != ""} {
    depends_lib-append  path:bin/mecab-config:mecab-utf8

    platform darwin 8 {
        build.env       MACOSX_DEPLOYMENT_TARGET=10.4
    }

    post-patch {
        reinplace "s|\#!/usr/bin/perl|\#!${perl5.bin}|" \
            ${worksrcpath}/test.pl
    }

    post-destroot {
        set exdir ${destroot}${prefix}/share/doc/${subport}/examples
        xinstall -m 755 -d ${exdir}
        xinstall -m 755 ${worksrcpath}/test.pl ${exdir}
    }

    livecheck.type      none
} else {
    livecheck.type      regex
    livecheck.url       http://code.google.com/p/mecab/downloads/list
    livecheck.regex     {mecab-perl-([\d\.]+)\.tar}
}
