# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 123398 2014-08-09 04:10:13Z ryandesign@macports.org $

PortSystem 1.0

name                znc
version             1.4
categories          irc
platforms           darwin
maintainers         mfeiri openmaintainer
license             Apache-2
description         An advanced IRC bouncer
long_description    ZNC is an IRC bounce/proxy with many advanced features \
                    like detaching, multiple users, multiple clients per \
                    user, channel/query playback buffers, SSL, IPv6, \
                    transparent DCC bouncing, C++/Perl/Tcl module support, \
                    party line, and Web administration.

homepage            http://znc.in/
master_sites        ${homepage}releases/old/
checksums           sha1    6dafcf12b15fdb95eac5b427c8507c1095e904b4 \
                    rmd160  46bba46d76f75efccde11a9addf4dfe67bc18032

universal_variant   no

depends_lib         port:openssl port:tcl port:perl5

patchfiles          patch-modules-modperl.cpp.diff \
                    patch-modules-modperl-Makefile.inc.diff

configure.args      --enable-perl --enable-tcl --with-tcl=${prefix}/lib --disable-python

variant python33 description "Enable Python modules, using python33" conflicts python34 {
    compiler.blacklist-append { clang <= 503.0.38  }
    configure.args-replace --disable-python --enable-python
    depends_lib-append port:python33
    configure.pkg_config_path ${frameworks_dir}/Python.framework/Versions/3.3/lib/pkgconfig/
}

variant python34 description "Enable Python modules, using python34" conflicts python33 {
    compiler.blacklist-append { clang <= 503.0.38  }
    configure.args-replace --disable-python --enable-python
    depends_lib-append port:python34
    configure.pkg_config_path ${frameworks_dir}/Python.framework/Versions/3.4/lib/pkgconfig/
}

livecheck.type      regex
livecheck.url       ${homepage}releases/
livecheck.regex     ${name}-(\[0-9.\]+)${extract.suffix}
