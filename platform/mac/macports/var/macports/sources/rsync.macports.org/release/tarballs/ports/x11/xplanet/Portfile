# $Id: Portfile 115019 2013-12-22 09:29:46Z ryandesign@macports.org $

PortSystem			1.0
name				xplanet
version				1.3.0
revision			4
categories			x11 graphics
maintainers			nomaintainer
license				GPL-2

description			Render an image of a planet into an X window or file
long_description \
	Xplanet is similar to Xearth, where an image of the earth is rendered \
	into an X window.  All of the major planets and most satellites can be \
	drawn.   A number of different map projections are also supported, \
	including azimuthal, Mercator, Mollweide, orthographic, and rectangular.

platforms			darwin

homepage			http://xplanet.sourceforge.net/
master_sites		sourceforge:project/xplanet/xplanet/${version}

checksums			rmd160  b5ba6239019669668aeb7f63391aa850cc3dd8b7 \
					sha256  44fb742bb93e5661ea8b11ccabcc12896693e051f3dd5083c9227224c416b442

depends_build \
	port:pkgconfig
depends_lib \
	port:xorg-libXScrnSaver \
	port:libpng \
	port:jpeg \
	port:tiff

patchfiles			objc-flags.diff patch-automake-1.13.diff

use_autoreconf		yes

configure.args		--with-x --with-xscreensaver --without-gif \
					--with-jpeg --with-png --with-tiff \
					--without-freetype --without-pango --without-pnm \
					--mandir=${prefix}/share/man

post-destroot {
	set docdir ${destroot}${prefix}/share/doc/${name}
	xinstall -d ${docdir}
	xinstall -W ${worksrcpath} AUTHORS COPYING ChangeLog NEWS README TODO ${docdir}
}

variant freetype description "Enable Freetype support for TrueType fonts" {
	configure.args-delete	--without-freetype
	configure.args-append	--with-freetype
	depends_lib-append	port:freetype
}

variant pango description "Enable Pango" {
	configure.args-delete	--without-pango
	configure.args-append	--with-pango
	depends_lib-append		path:lib/pkgconfig/pango.pc:pango
}

variant aqua description "Use aqua instead of X11" {
	supported_archs	i386 ppc
	depends_lib-delete	port:xorg-libXScrnSaver
	configure.args-delete	--with-x --with-xscreensaver
	configure.args-append	--without-x --with-aqua
}

variant pnm description "Enable PNM support" {
	depends_lib-append		port:netpbm
	configure.args-delete	--without-pnm
	configure.args-append	--with-pnm
}

