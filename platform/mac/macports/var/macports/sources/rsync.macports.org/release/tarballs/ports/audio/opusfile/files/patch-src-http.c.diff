--- src/http.c.orig	2015-02-26 10:23:12.000000000 -0800
+++ src/http.c	2015-02-26 10:27:55.000000000 -0800
@@ -721,7 +721,7 @@
   char             service[6];
   memset(&hints,0,sizeof(hints));
   hints.ai_socktype=SOCK_STREAM;
-#if !defined(_WIN32)
+#if defined(AI_NUMERICSERV)
   hints.ai_flags=AI_NUMERICSERV;
 #endif
   OP_ASSERT(_port<=65535U);
