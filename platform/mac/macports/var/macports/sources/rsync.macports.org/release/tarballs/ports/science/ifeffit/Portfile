# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 132592 2015-02-05 17:39:56Z larryv@macports.org $

PortSystem          1.0

name                ifeffit
version             1.2.13
revision            2

categories          science
platforms           darwin
license             Permissive
maintainers         nist.gov:joe.fowler openmaintainer

description         IFEFFIT is a program and programming library for analyzing x-ray absorption fine-structure (XAFS) data.

long_description    IFEFFIT is a program and programming library for analyzing x-ray absorption fine-structure (XAFS) data. \
                    As its name may suggest, IFEFFIT1 gives an interactive method for fitting XAFS data using calculations \
                    from FEFF, and is based on the fitting program FEFFIT of the UWXAFS3.0 Analysis Package.

homepage            http://cars.uchicago.edu/~ifeffit/
master_sites        https://github.com/newville/ifeffit/archive/

checksums           rmd160  dedd8b9f6be0d0b0bce67e5f53c18faddf7b0912 \
                    sha256  72a7f5bd6e6e1ff2b41761cfe726f79f2da8e71606399d3c3307451496a1c0ef

distname            1.2.final
worksrcdir          ${name}-${distname}

depends_lib         port:pgplot

configure.args      --with-pgplot=${prefix}/lib

variant gcc45 description {Use gfortran from gcc45} conflicts gcc46 gcc47 gcc48 gcc49 {
    depends_lib-append    port:gcc45
    configure.fc          ${prefix}/bin/gfortran-mp-4.5
    configure.f77         ${prefix}/bin/gfortran-mp-4.5
    configure.f90         ${prefix}/bin/gfortran-mp-4.5
    configure.args-append --with-fortran=${prefix}/bin/gfortran-mp-4.5
}

variant gcc46 description {Use gfortran from gcc46} conflicts gcc45 gcc47 gcc48 gcc49 {
    depends_lib-append    port:gcc46
    configure.fc          ${prefix}/bin/gfortran-mp-4.6
    configure.f77         ${prefix}/bin/gfortran-mp-4.6
    configure.f90         ${prefix}/bin/gfortran-mp-4.6
    configure.args-append --with-fortran=${prefix}/bin/gfortran-mp-4.6
}

variant gcc47 description {Use gfortran from gcc47} conflicts gcc45 gcc46 gcc48 gcc49 {
    depends_lib-append    port:gcc47
    configure.fc          ${prefix}/bin/gfortran-mp-4.7
    configure.f77         ${prefix}/bin/gfortran-mp-4.7
    configure.f90         ${prefix}/bin/gfortran-mp-4.7
    configure.args-append --with-fortran=${prefix}/bin/gfortran-mp-4.7
}

variant gcc48 description {Use gfortran from gcc48} conflicts gcc45 gcc46 gcc47 gcc49 {
    depends_lib-append    port:gcc48
    configure.fc          ${prefix}/bin/gfortran-mp-4.8
    configure.f77         ${prefix}/bin/gfortran-mp-4.8
    configure.f90         ${prefix}/bin/gfortran-mp-4.8
    configure.args-append --with-fortran=${prefix}/bin/gfortran-mp-4.8
}

variant gcc49 description {Use gfortran from gcc49} conflicts gcc45 gcc46 gcc47 gcc48 {
    depends_lib-append    port:gcc49
    configure.fc          ${prefix}/bin/gfortran-mp-4.9
    configure.f77         ${prefix}/bin/gfortran-mp-4.9
    configure.f90         ${prefix}/bin/gfortran-mp-4.9
    configure.args-append --with-fortran=${prefix}/bin/gfortran-mp-4.9
}

if {![variant_isset gcc45] && ![variant_isset gcc46] && ![variant_isset gcc47] && ![variant_isset gcc49]} {
    default_variants    +gcc48
}
