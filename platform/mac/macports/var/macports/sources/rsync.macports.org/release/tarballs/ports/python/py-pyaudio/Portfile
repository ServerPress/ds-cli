# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 127150 2014-10-22 01:08:59Z larryv@macports.org $

PortSystem              1.0
PortGroup               python 1.0

name                    py-pyaudio
version                 0.2.8
categories-append       audio
platforms               darwin
maintainers             NLnetLabs.nl:jaap
license                 MIT

description             PyAudio provides Python bindings for PortAudio
long_description        PyAudio provides Python bindings for PortAudio, \
                        the cross-platform audio I/O library. With PyAudio, \
                        you can easily use Python to play and record audio \
                        on a variety of platforms.

homepage                http://people.csail.mit.edu/hubert/pyaudio/

master_sites            ${homepage}packages/
distname                pyaudio-${version}
checksums               md5     5c93a193224cca0183ec434dc558cff5 \
                        rmd160  4310bf3ab32968a4f32e085cb07caaebadffbb64 \
                        sha256  4f85367cf79657616684487037957ac38582ecc5389b89420fe61d901b719551

worksrcdir              PyAudio-${version}

python.versions         26 27 34

if {${name} ne ${subport}} {
    depends_lib-append  port:portaudio

    patchfiles          patch-setup.py.diff
    post-patch {
        reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/setup.py
    }

    python.link_binaries no

    livecheck.type      none
} else {
    livecheck.type      regex
    livecheck.url       [lindex ${master_sites} 0]
    livecheck.regex     pyaudio-(\[0-9.\]+)${extract.suffix}
}
