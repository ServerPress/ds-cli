# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 137454 2015-06-12 00:04:22Z ryandesign@macports.org $

PortSystem              1.0
PortGroup               github 1.0
PortGroup               php 1.1

github.setup            phalcon cphalcon 2.0.3 phalcon-v
name                    php-phalcon
platforms               darwin
maintainers             ryandesign openmaintainer
license                 BSD

php.branches            5.3 5.4 5.5 5.6

description             full stack PHP framework written as an extension

long_description        Phalcon is an open source, full stack framework for \
                        PHP 5 written as a C extension, optimized for high \
                        performance. Phalcon is a loosely coupled set of PHP \
                        classes, allowing you to use its objects as glue \
                        components based on the needs of your application. \
                        Phalcon is not only about performance\; the goal is \
                        to make it robust, rich in features and easy to use!

homepage                http://www.phalconphp.com/

checksums               rmd160  4d91fbf5f69bf37ce73970203de00c842ee5a9a6 \
                        sha256  3df3b7a686ae71893a7defc2c3cdc9c7968c7352acba652b5324efd9bba3a836

if {${name} ne ${subport}} {
    # The build/install script makes all sorts of assumptions I don't like
    # so I'm ignoring it.

    # Ugh... separate 32-bit and 64-bit source trees.
    if {[string match *64 ${build_arch}]} {
        worksrcdir      ${worksrcdir}/build/64bits
    } else {
        worksrcdir      ${worksrcdir}/build/32bits
    }

    # Separate source trees means using the muniversal portgroup
    # but it doesn't get along with the php portgroup.
    universal_variant   no

    configure.args      --enable-phalcon
}
