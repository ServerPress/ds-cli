# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 135219 2015-04-19 16:40:48Z khindenburg@macports.org $

PortSystem 1.0

name                cloc
version             1.62
revision            1
set perl_version    5.16
categories          textproc devel
license             GPL-2 Artistic-1
platforms           darwin
maintainers         vt.edu:jpo openmaintainer
description         cloc counts blank lines, comment lines, and physical lines \
                    of source code in many programming languages.
long_description    ${description}

homepage            http://cloc.sourceforge.net
master_sites        sourceforge:project/cloc/cloc/v${version}/

checksums           rmd160  ab487a6e81a4f2663e632e27237d07faf948784c \
                    sha256  c4111ef5768b1c2844c0c826988df6f92fbb5aa7452a5005d3a031d68631acb3

depends_run-append  port:perl${perl_version} \
                    port:p${perl_version}-algorithm-diff \
                    port:p${perl_version}-regexp-common \
                    port:p${perl_version}-digest-md5

use_configure       no

destroot.args-append prefix=${prefix}

post-destroot {
    reinplace -W ${destroot}${prefix}/bin "s|#!/usr/bin/env perl|#! ${prefix}/bin/perl${perl_version}|" \
        cloc
    }

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     {latest version: (\d+(?:\.\d+)*)}
