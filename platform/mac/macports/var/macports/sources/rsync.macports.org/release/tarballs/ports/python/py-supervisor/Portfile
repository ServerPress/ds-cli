# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 128238 2014-11-17 01:51:01Z khindenburg@macports.org $

PortSystem          1.0
PortGroup           python 1.0

name                py-supervisor
set real_name       supervisor
version             3.1.3
license             BSD ZPL-2.1
maintainers         nomaintainer
description         Process manager for UNIX-like OSs
long_description    The supervisor is a client/server system that allows its users to control a number of processes on UNIX-like operating systems

platforms           darwin
supported_archs     noarch

homepage            http://supervisord.org
master_sites        https://pypi.python.org/packages/source/s/${real_name}
distname            supervisor-${version}

checksums           rmd160  9598b25640e72b0322cbb79a8f8f26712135efba \
                    sha256  e32c546fe8d2a6e079ec4819c49fd24534d4075a58af39118d04367918b3c282

python.versions     27 34

if {${name} ne ${subport}} {
    depends_lib-append	port:py${python.version}-setuptools \
                port:py${python.version}-elementtree \
                port:py${python.version}-meld3 \
                port:py${python.version}-medusa

    post-destroot   {
            file delete -force ${destroot}${prefix}/doc
            xinstall -m 644 -W ${worksrcpath} README.rst docs/plugins.rst CHANGES.txt COPYRIGHT.txt LICENSES.txt TODO.txt supervisor/skel/sample.conf ${destroot}${prefix}/share/doc/${subport}
    }
    test.run        yes
    livecheck.type  none
} else {
    livecheck.type  regex
    livecheck.url   [lindex ${master_sites} 0]
    livecheck.regex ${real_name}-(\[0-9.\]+)${extract.suffix}
}
