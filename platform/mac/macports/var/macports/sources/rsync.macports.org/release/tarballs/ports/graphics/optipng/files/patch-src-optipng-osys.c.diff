https://sourceforge.net/p/optipng/bugs/47/
--- src/optipng/osys.c.orig	2014-02-23 10:37:00.000000000 -0600
+++ src/optipng/osys.c	2014-10-06 20:28:18.000000000 -0500
@@ -518,7 +518,7 @@
     if (chmod(dest_path, sbuf.st_mode) != 0)
         result = -1;
 
-#ifdef AT_FDCWD
+#if defined(AT_FDCWD) && !defined(__APPLE__) && !defined(__SVR4) && !defined(__sun)
     {
         struct timespec times[2];
 
