# $Id: Portfile 122766 2014-07-29 12:31:00Z kimuraw@macports.org $

PortSystem 1.0

name            lcov
version         1.11
categories      devel
maintainers     kimuraw openmaintainer
description     \
        LCOV is a graphical front-end for GCC's coverage testing tool gcov.
long_description \
        LCOV is a graphical front-end for GCC's coverage testing tool gcov. \
        It collects gcov data for multiple source files and creates HTML \
        pages containing the source code annotated with coverage information. \
        It also adds overview pages for easy navigation within the file \
        structure.

homepage        http://ltp.sourceforge.net/coverage/lcov.php
license         GPL-2+
platforms       darwin
supported_archs noarch
master_sites    sourceforge:ltp
depends_lib     port:perl5
patchfiles      patch-Makefile.diff \
                patch-bin-install.sh.diff
use_configure   no
build           {}
destroot.env    PREFIX=${destroot}${prefix}
post-destroot   {
        # install docs and examples
        xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
        xinstall -m 644 \
            ${worksrcpath}/README \
            ${worksrcpath}/CHANGES \
                ${destroot}${prefix}/share/doc/${name}
        foreach subdir { example example/methods } {
            xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/${subdir}
            eval xinstall -m 644 [glob -type f ${worksrcpath}/${subdir}/*] \
                ${destroot}${prefix}/share/doc/${name}/${subdir}
        }
        foreach cmd [glob ${destroot}${prefix}/bin/*] {
            reinplace "s|/usr/bin/perl|${prefix}/bin/perl5|" ${cmd}
            reinplace "s|/etc/lcovrc|${prefix}/etc/lcovrc|" ${cmd}
        }
}
checksums       md5     e79b799ae3ce149aa924c7520e993024 \
                rmd160  97f65c258c2fc54fd085501de490ba7128baa4f6 \
                sha1    bf8ed68c06805a71528a2a67dd714830afd3ccb5 \
                sha256  c282de8d678ecbfda32ce4b5c85fc02f77c2a39a062f068bd8e774d29ddc9bf8

livecheck.type  regex
livecheck.url   ${homepage}
livecheck.regex {>lcov-(.*).tar.gz</a>}

