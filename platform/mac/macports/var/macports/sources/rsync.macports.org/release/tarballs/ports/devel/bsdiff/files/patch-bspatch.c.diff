--- bspatch.c	2005-08-16 17:14:00.000000000 -0500
+++ bspatch.c	2008-08-04 19:38:14.000000000 -0500
@@ -28,6 +28,7 @@
 __FBSDID("$FreeBSD: src/usr.bin/bsdiff/bspatch/bspatch.c,v 1.1 2005/08/06 01:59:06 cperciva Exp $");
 #endif
 
+#include <sys/types.h>
 #include <bzlib.h>
 #include <stdlib.h>
 #include <stdio.h>
