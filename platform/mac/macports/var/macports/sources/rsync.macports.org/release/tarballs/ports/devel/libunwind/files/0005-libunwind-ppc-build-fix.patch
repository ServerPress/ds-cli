From f9b3d797e4899e235142d1171f18796830cbcd49 Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
Date: Sun, 11 Jan 2015 14:35:08 -0800
Subject: [PATCH 5/8] libunwind: ppc build fix

http://www.llvm.org/bugs/show_bug.cgi?id=22200

Signed-off-by: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
---
 src/Unwind/config.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/Unwind/config.h b/src/Unwind/config.h
index 6b459ee..80c476c 100644
--- a/src/Unwind/config.h
+++ b/src/Unwind/config.h
@@ -39,9 +39,9 @@
     }
   #endif
 
-  #define _LIBUNWIND_BUILD_ZERO_COST_APIS (__i386__ || __x86_64__ || __arm64__)
+  #define _LIBUNWIND_BUILD_ZERO_COST_APIS (__ppc__ || __ppc64__ || __i386__ || __x86_64__ || __arm64__)
   #define _LIBUNWIND_BUILD_SJLJ_APIS      (__arm__)
-  #define _LIBUNWIND_SUPPORT_FRAME_APIS   (__i386__ || __x86_64__)
+  #define _LIBUNWIND_SUPPORT_FRAME_APIS   (__ppc__ || __ppc64__ || __i386__ || __x86_64__)
   #define _LIBUNWIND_EXPORT               __attribute__((visibility("default")))
   #define _LIBUNWIND_HIDDEN               __attribute__((visibility("hidden")))
   #define _LIBUNWIND_LOG(msg, ...) fprintf(stderr, "libuwind: " msg, __VA_ARGS__)
@@ -67,9 +67,9 @@
     abort();
   }
 
-  #define _LIBUNWIND_BUILD_ZERO_COST_APIS (__i386__ || __x86_64__ || __arm64__ || __arm__)
+  #define _LIBUNWIND_BUILD_ZERO_COST_APIS (__ppc__ || __ppc64__ || __i386__ || __x86_64__ || __arm64__ || __arm__)
   #define _LIBUNWIND_BUILD_SJLJ_APIS      0
-  #define _LIBUNWIND_SUPPORT_FRAME_APIS   (__i386__ || __x86_64__)
+  #define _LIBUNWIND_SUPPORT_FRAME_APIS   (__ppc__ || __ppc64__ || __i386__ || __x86_64__)
   #define _LIBUNWIND_EXPORT               __attribute__((visibility("default")))
   #define _LIBUNWIND_HIDDEN               __attribute__((visibility("hidden")))
   #define _LIBUNWIND_LOG(msg, ...) fprintf(stderr, "libuwind: " msg, __VA_ARGS__)
-- 
2.2.1

