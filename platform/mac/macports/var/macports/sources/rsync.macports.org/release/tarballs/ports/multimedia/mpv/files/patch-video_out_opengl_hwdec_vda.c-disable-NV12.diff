--- video/out/opengl/hwdec_vda.c.orig
+++ video/out/opengl/hwdec_vda.c
@@ -23,6 +23,7 @@
 #include <CoreVideo/CoreVideo.h>
 #include <OpenGL/OpenGL.h>
 #include <OpenGL/CGLIOSurface.h>
+#include <AvailabilityMacros.h>
 
 #include "video/mp_image_pool.h"
 #include "hwdec.h"
@@ -54,7 +55,9 @@ static struct vda_format vda_formats[] =
         .gl = {
             { GL_RGB_422_APPLE, GL_UNSIGNED_SHORT_8_8_APPLE, GL_RGB }
         }
-    }, {
+    }
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 1070
+    , {
         .cvpixfmt = kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange,
         .imgfmt = IMGFMT_NV12,
         .planes = 2,
@@ -63,6 +66,7 @@ static struct vda_format vda_formats[] =
             { GL_RG,  GL_UNSIGNED_BYTE, GL_RG } ,
         }
     }
+#endif /* MAC_OS_X_VERSION_MIN_REQUIRED >= 1070 */
 };
 
 static struct vda_format *vda_get_gl_format(uint32_t cvpixfmt)
@@ -159,11 +163,15 @@ static int create_common(struct gl_hwdec
 static int create(struct gl_hwdec *hw)
 {
     // For videotoolbox, we always request NV12.
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 1070
 #if HAVE_VDA_DEFAULT_INIT2
     struct vda_format *f = vda_get_gl_format_from_imgfmt(IMGFMT_NV12);
 #else
     struct vda_format *f = vda_get_gl_format_from_imgfmt(IMGFMT_UYVY);
 #endif
+#else
+    struct vda_format *f = vda_get_gl_format_from_imgfmt(IMGFMT_UYVY);
+#endif /* MAC_OS_X_VERSION_MIN_REQUIRED >= 1070 */
     if (create_common(hw, f))
         return -1;
 
