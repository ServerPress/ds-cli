diff -ru ../perlkde-4.8.4_orig/akonadi/src/akonadihandlers.cpp ./akonadi/src/akonadihandlers.cpp
--- ../perlkde-4.8.4_orig/akonadi/src/akonadihandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./akonadi/src/akonadihandlers.cpp	2012-07-13 18:07:32.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./akonadi/src: akonadihandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/attica/src/atticahandlers.cpp ./attica/src/atticahandlers.cpp
--- ../perlkde-4.8.4_orig/attica/src/atticahandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./attica/src/atticahandlers.cpp	2012-07-13 18:08:23.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./attica/src: atticahandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/kate/src/katehandlers.cpp ./kate/src/katehandlers.cpp
--- ../perlkde-4.8.4_orig/kate/src/katehandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kate/src/katehandlers.cpp	2012-07-13 18:10:48.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kate/src: katehandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/kdecore/src/kdecore4handlers.cpp ./kdecore/src/kdecore4handlers.cpp
--- ../perlkde-4.8.4_orig/kdecore/src/kdecore4handlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kdecore/src/kdecore4handlers.cpp	2012-07-13 17:57:17.000000000 +0900
@@ -23,6 +23,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kdecore/src: kdecore4handlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/kdeui/src/kdeui4handlers.cpp ./kdeui/src/kdeui4handlers.cpp
--- ../perlkde-4.8.4_orig/kdeui/src/kdeui4handlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kdeui/src/kdeui4handlers.cpp	2012-07-13 17:55:53.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kdeui/src: kdeui4handlers.cpp.orig.cpp
Only in ./kfile: .DS_Store
diff -ru ../perlkde-4.8.4_orig/kfile/src/kfilehandlers.cpp ./kfile/src/kfilehandlers.cpp
--- ../perlkde-4.8.4_orig/kfile/src/kfilehandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kfile/src/kfilehandlers.cpp	2012-07-13 17:56:22.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kfile/src: kfilehandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/khtml/src/khtmlhandlers.cpp ./khtml/src/khtmlhandlers.cpp
--- ../perlkde-4.8.4_orig/khtml/src/khtmlhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./khtml/src/khtmlhandlers.cpp	2012-07-13 17:57:50.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./khtml/src: khtmlhandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/kio/src/kio4handlers.cpp ./kio/src/kio4handlers.cpp
--- ../perlkde-4.8.4_orig/kio/src/kio4handlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kio/src/kio4handlers.cpp	2012-07-13 17:59:57.000000000 +0900
@@ -23,6 +23,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kio/src: kio4handlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/knewstuff2/src/knewstuff2handlers.cpp ./knewstuff2/src/knewstuff2handlers.cpp
--- ../perlkde-4.8.4_orig/knewstuff2/src/knewstuff2handlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./knewstuff2/src/knewstuff2handlers.cpp	2012-07-13 17:59:00.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./knewstuff2/src: knewstuff2handlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/knewstuff3/src/knewstuff3handlers.cpp ./knewstuff3/src/knewstuff3handlers.cpp
--- ../perlkde-4.8.4_orig/knewstuff3/src/knewstuff3handlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./knewstuff3/src/knewstuff3handlers.cpp	2012-07-13 17:59:26.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./knewstuff3/src: knewstuff3handlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/kparts/src/kpartshandlers.cpp ./kparts/src/kpartshandlers.cpp
--- ../perlkde-4.8.4_orig/kparts/src/kpartshandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kparts/src/kpartshandlers.cpp	2012-07-13 18:00:46.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kparts/src: kpartshandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/ktexteditor/src/ktexteditorhandlers.cpp ./ktexteditor/src/ktexteditorhandlers.cpp
--- ../perlkde-4.8.4_orig/ktexteditor/src/ktexteditorhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./ktexteditor/src/ktexteditorhandlers.cpp	2012-07-13 18:01:48.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./ktexteditor/src: ktexteditorhandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/kutils/src/kutilshandlers.cpp ./kutils/src/kutilshandlers.cpp
--- ../perlkde-4.8.4_orig/kutils/src/kutilshandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./kutils/src/kutilshandlers.cpp	2012-07-13 18:01:16.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./kutils/src: kutilshandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/nepomuk/src/nepomukhandlers.cpp ./nepomuk/src/nepomukhandlers.cpp
--- ../perlkde-4.8.4_orig/nepomuk/src/nepomukhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./nepomuk/src/nepomukhandlers.cpp	2012-07-13 18:08:55.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./nepomuk/src: nepomukhandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/nepomukquery/src/nepomukqueryhandlers.cpp ./nepomukquery/src/nepomukqueryhandlers.cpp
--- ../perlkde-4.8.4_orig/nepomukquery/src/nepomukqueryhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./nepomukquery/src/nepomukqueryhandlers.cpp	2012-07-13 18:09:31.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./nepomukquery/src: nepomukqueryhandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/okular/src/okularhandlers.cpp ./okular/src/okularhandlers.cpp
--- ../perlkde-4.8.4_orig/okular/src/okularhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./okular/src/okularhandlers.cpp	2012-07-13 18:10:00.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./okular/src: okularhandlers.cpp.orig.cpp
Only in .: patch-doopen.diff
diff -ru ../perlkde-4.8.4_orig/plasma/src/plasma4handlers.cpp ./plasma/src/plasma4handlers.cpp
--- ../perlkde-4.8.4_orig/plasma/src/plasma4handlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./plasma/src/plasma4handlers.cpp	2012-07-13 18:02:17.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./plasma/src: plasma4handlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/solid/src/solidhandlers.cpp ./solid/src/solidhandlers.cpp
--- ../perlkde-4.8.4_orig/solid/src/solidhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./solid/src/solidhandlers.cpp	2012-07-13 18:04:41.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./solid/src: solidhandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/soprano/src/sopranohandlers.cpp ./soprano/src/sopranohandlers.cpp
--- ../perlkde-4.8.4_orig/soprano/src/sopranohandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./soprano/src/sopranohandlers.cpp	2012-07-13 18:05:11.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./soprano/src: sopranohandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/sopranoclient/src/sopranoclienthandlers.cpp ./sopranoclient/src/sopranoclienthandlers.cpp
--- ../perlkde-4.8.4_orig/sopranoclient/src/sopranoclienthandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./sopranoclient/src/sopranoclienthandlers.cpp	2012-07-13 18:05:51.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./sopranoclient/src: sopranoclienthandlers.cpp.orig.cpp
diff -ru ../perlkde-4.8.4_orig/sopranoserver/src/sopranoserverhandlers.cpp ./sopranoserver/src/sopranoserverhandlers.cpp
--- ../perlkde-4.8.4_orig/sopranoserver/src/sopranoserverhandlers.cpp	2011-07-28 03:37:38.000000000 +0900
+++ ./sopranoserver/src/sopranoserverhandlers.cpp	2012-07-13 18:06:58.000000000 +0900
@@ -21,6 +21,13 @@
 #include "perl.h"
 #include "XSUB.h"
 #include "ppport.h"
+#ifdef do_open
+#undef do_open
+#endif
+	
+#ifdef do_close
+#undef do_close
+#endif	
 }
 
 #include <smokeperl.h>
Only in ./sopranoserver/src: sopranoserverhandlers.cpp.orig.cpp
