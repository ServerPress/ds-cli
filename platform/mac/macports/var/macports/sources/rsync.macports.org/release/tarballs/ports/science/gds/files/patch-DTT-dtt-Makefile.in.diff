--- DTT/dtt/Makefile.in.orig	2015-06-08 13:28:58.000000000 -0700
+++ DTT/dtt/Makefile.in	2015-06-08 14:29:17.000000000 -0700
@@ -551,7 +551,7 @@
 	$(am__ezcawrite_SOURCES_DIST) $(gdserrd_SOURCES) \
 	$(am__tpcmd_SOURCES_DIST) $(xmlconv_SOURCES) \
 	$(xmldata_SOURCES) $(xmldir_SOURCES)
-am__python_PYTHON_DIST = $(dttsrc)/awg/awgbase.py $(dttsrc)/awg/awg.py
+am__python_PYTHON_DIST = awgbase.py $(dttsrc)/awg/awg.py
 py_compile = $(top_srcdir)/config/py-compile
 DATA = $(share_DATA)
 am__include_dtt_HEADERS_DIST = $(dttsrc)/awg/awgapi.h \
@@ -1299,7 +1299,7 @@
 @build_ezca_TRUE@ezcaswitch_CXXFLAGS = $(ezca_cxxflags)
 @build_ezca_TRUE@ezcaservo_CXXFLAGS = $(ezca_cxxflags) -I$(basepath)/time
 @build_ezca_TRUE@ezcademod_CXXFLAGS = $(cmd_cxxflags) $(epicscflags)
-@dtt_online_TRUE@python_PYTHON = $(dttsrc)/awg/awgbase.py $(dttsrc)/awg/awg.py
+@dtt_online_TRUE@python_PYTHON = awgbase.py $(dttsrc)/awg/awg.py
 CLEANFILES = hdr-time-stamp rpc-time-stamp
 all: $(BUILT_SOURCES)
 	$(MAKE) $(AM_MAKEFLAGS) all-am
@@ -4125,6 +4125,9 @@
 #
 .NOTPARALLEL:
 
+awgbase.py: $(dttsrc)/awg/awgbase.py.in
+	$(SED) 's,__libdir__,'$(libdir)',' $< >$@
+
 hdr-time-stamp: Makefile $(DTTHEADERS)
 	$(mkdir_p) $(DTTINCLUDEDIR)
 	for f in $(DTTHEADERS); do \
