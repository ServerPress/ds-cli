# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 139024 2015-07-30 04:47:37Z devans@macports.org $

PortSystem 1.0

name             libraw
version          0.16.2
homepage         http://www.libraw.org/
description      library for RAW images manipulation
long_description      a library for reading RAW files obtained from digital photo cameras (CRW/CR2, NEF, RAF, DNG, and others)
categories       graphics
platforms        darwin
license          GPL-2+
maintainers      pvanek openmaintainer

master_sites     http://www.libraw.org/data/
distname         LibRaw-${version}

checksums        rmd160  8857b3531be0c96e4715dd7e3f4ba97e9d0f82ac \
                 sha256  6344e355f7c23f13e266844b36265d5f624237ba5a62dc901c7b91b510a84187

depends_lib      port:jasper \
                 port:lcms2

# this is probably mandatory to get jasper in the game... there is no --with-jasper-... at all
configure.env-append LDFLAGS=-L${prefix}/lib CPPFLAGS=-I${prefix}/include

destroot.destdir prefix=${destroot}${prefix}

livecheck.type  regex
livecheck.url   http://www.libraw.org/download/
livecheck.regex "LibRaw-(\\d+(?:\\.\\d+)*)${extract.suffix}"
