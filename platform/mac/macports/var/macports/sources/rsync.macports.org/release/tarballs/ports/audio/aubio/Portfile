# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 127000 2014-10-18 22:06:57Z devans@macports.org $

PortSystem              1.0
PortGroup               waf 1.0

name                    aubio
version                 0.4.1
revision                1
license                 GPL-2
categories              audio
maintainers             devans openmaintainer
platforms               darwin

description             audio labeling library
long_description        ${name} is a library for audio labeling. \
                        Its features include segmenting a sound file before each of its attacks, \
                        performing pitch detection, \
                        tapping the beat and producing MIDI streams from live audio.

homepage                http://aubio.org/
master_sites            ${homepage}pub/

use_bzip2               yes

checksums               rmd160  830a1ca49964a550f41419538a734c48466da633 \
                        sha256  25d7df0a9cd6366fda764a803424caddf5fb819fc75b42a7a03e1e6f8eb3c695

depends_build           port:pkgconfig \
                        port:txt2man

depends_skip_archcheck  txt2man

depends_lib             path:lib/libavcodec.dylib:ffmpeg \
                        port:fftw-3-single \
                        port:libsndfile \
                        port:libsamplerate

patchfiles              patch-wscript.diff

configure.ldflags-delete \
                        -L${prefix}/lib

configure.args-append   --enable-fftw3f \
                        --disable-jack \
                        --notests

variant jack description {Enable jack support} {
    configure.args-delete   --disable-jack
    depends_lib-append      port:jack
}

livecheck.type          regex
livecheck.url           ${master_sites}
livecheck.regex         "${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}"
