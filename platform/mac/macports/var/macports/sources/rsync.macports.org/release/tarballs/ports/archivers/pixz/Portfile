# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 134404 2015-03-25 01:18:16Z ryandesign@macports.org $

PortSystem          1.0
PortGroup           github 1.0

github.setup        vasi pixz 1.0.2 v
categories          archivers
platforms           darwin
maintainers         ryandesign openmaintainer
license             BSD

description         Pixz (pronounced 'pixie') is a parallel, indexing version of XZ

long_description    The existing XZ Utils provide great compression in the .xz \
                    file format, but they have two significant problems: \
                    \
                    \n\n* They are single-threaded, while most users now have \
                      multi-core computers. \
                    \n* The .xz files they produce are just one big block of \
                      compressed data, rather than a collection of smaller \
                      blocks. This makes random access to the original data \
                      impossible. \
                    \
                    \n\nWith pixz, both these problems are solved.

master_sites        sourceforge:pixz
extract.suffix      .tgz

checksums           rmd160  e9aa82f0f72b786d5ea07e8d9bdd88f10ef30f06 \
                    sha256  af9dac41edd6bf57953471f7fcbd4793810003bf911593ba4c84f7cccb5f74af

depends_lib         port:libarchive \
                    port:xz

use_configure       no

variant universal {}

build.args          CC="${configure.cc}" \
                    CFLAGS="${configure.cppflags} [get_canonical_archflags cc]" \
                    LDFLAGS="${configure.ldflags} [get_canonical_archflags ld]" \
                    OPT="${configure.optflags}"

destroot {
    xinstall ${worksrcpath}/${name} ${destroot}${prefix}/bin/

    xinstall -m 644 ${worksrcpath}/${name}.1 ${destroot}${prefix}/share/man/man1/

    set docdir ${prefix}/share/doc/${subport}
    xinstall -d ${destroot}${docdir}
    xinstall -m 644 -W ${worksrcpath} \
        LICENSE \
        NEWS \
        README \
        TODO \
        ${destroot}${docdir}
}
