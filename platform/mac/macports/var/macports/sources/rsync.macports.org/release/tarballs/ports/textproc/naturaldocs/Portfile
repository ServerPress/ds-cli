# $Id: Portfile 111633 2013-09-27 16:04:06Z macsforever2000@macports.org $

PortSystem 1.0
PortGroup 	perl5 1.0

name			naturaldocs
version			1.5
revision        3
categories		textproc devel
license			AGPL-3
maintainers		landonf openmaintainer
description		Documentation system for several programming languages
long_description \
    Natural Docs is an open-source documentation generator for multiple \
    programming languages.  You document your code in a natural syntax \
    that reads like plain English.  Natural Docs then scans your code \
    and builds high-quality HTML documentation from it.

platforms		darwin
supported_archs noarch

homepage		http://www.naturaldocs.org/
master_sites    sourceforge
distname        NaturalDocs-${version}
use_zip         yes
extract.mkdir   yes

checksums       md5     0c6fc5b424e672350c9ae510cabdeca5 \
                sha1    e506e2759f7436467d4b8dcb7b37300401d07008 \
                rmd160  3c571a080090d02e90e84013c864608376a7fd7e

depends_lib     path:bin/perl:perl5

use_configure no

post-patch {
    reinplace -locale C s|/usr/bin/perl|${prefix}/bin/perl|g ${worksrcpath}/NaturalDocs
    system "chmod +x \"${worksrcpath}/NaturalDocs\""
}

build {}

destroot {
    file copy ${worksrcpath} ${destroot}${prefix}/lib/
    ln -sf ${prefix}/lib/NaturalDocs-${version}/NaturalDocs ${destroot}${prefix}/bin/
    file mkdir ${destroot}${perl5.lib}
    ln -sf ${prefix}/lib/NaturalDocs-${version}/Modules/NaturalDocs ${destroot}${perl5.lib}/
}
