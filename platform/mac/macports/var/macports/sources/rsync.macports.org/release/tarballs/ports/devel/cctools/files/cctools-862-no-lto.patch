--- misc/libtool.c.orig	2014-11-01 22:48:10.000000000 -0700
+++ misc/libtool.c	2015-02-11 13:47:57.000000000 -0800
@@ -1374,8 +1374,11 @@ void)
 			    }
 			}
 		    }
-		    else if(ofiles[i].arch_type == OFILE_Mach_O ||
-		            ofiles[i].arch_type == OFILE_LLVM_BITCODE){
+		    else if(ofiles[i].arch_type == OFILE_Mach_O
+#ifdef LTO_SUPPORT
+		            || ofiles[i].arch_type == OFILE_LLVM_BITCODE
+#endif
+                    ){
 			if(cmd_flags.ranlib == TRUE){
 			    error("for architecture: %s file: %s is not an "
 				  "archive (no processing done on this file)",
