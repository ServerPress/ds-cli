# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 129651 2014-12-18 01:30:55Z pixilla@macports.org $

PortSystem          1.0

name                cyassl
version             3.3.0
categories          devel security
platforms           darwin
maintainers         yassl.com:chris
homepage            http://www.wolfssl.com/yaSSL/Products-cyassl.html
license             GPL-2
description         CyaSSL Embedded SSL Library

long_description    \
    The CyaSSL embedded SSL library is a lightweight SSL library written \
    in ANSI C and targeted for embedded and RTOS environments - primarily \
    because of its small size, speed, and feature set.  It is commonly \
    used in standard operating environments as well because of its \
    royalty-free pricing and excellent cross platform support.  CyaSSL \
    supports industry standards up to the current TLS and DTLS 1.2 levels, \
    is up to 20 times smaller than OpenSSL, and offers progressive ciphers \
    such as HC-128, RABBIT, and NTRU.

master_sites        http://www.wolfssl.com/
use_zip             yes

checksums           rmd160  29a3d8b6d055c6c9d475e1739e440467164c9096 \
                    sha256  e51583ea1e4d64537553922d67a96360312811dffef58d4c05506aa98a296fe3

configure.args      --enable-opensslExtra \
                    --enable-dtls \
                    --enable-savesession \
                    --enable-atomicuser \
                    --enable-pkcallbacks \
                    --enable-aesgcm \
                    --enable-aesccm \
                    --enable-camellia \
                    --enable-md2 \
                    --enable-md4 \
                    --enable-nullcipher \
                    --enable-ripemd \
                    --enable-blake2 \
                    --enable-sha384 \
                    --enable-sha512 \
                    --enable-sessioncerts \
                    --enable-keygen \
                    --enable-certgen \
                    --enable-certreq \
                    --enable-sep \
                    --enable-hkdf \
                    --enable-dsa \
                    --enable-ecc \
                    --enable-fpecc \
                    --enable-eccencrypt \
                    --enable-psk \
                    --enable-pwdbased \
                    --enable-hc128 \
                    --enable-rabbit \
                    --enable-ocsp \
                    --enable-crl \
                    --enable-crl-monitor \
                    --enable-sni \
                    --enable-maxfragment \
                    --enable-truncatedhmac \
                    --enable-renegotiation-indication \
                    --enable-supportedcurves \
                    --enable-tlsx \
                    --enable-pkcs7 \
                    --enable-scep \
                    --enable-testcert \
                    --enable-fastmath \
                    --enable-gcc-hardening \
                    --enable-static \

variant debug description {Enable CyaSSL debugging support} {
    configure.args-append \
        --enable-debug
}

variant aesni description {Enable CyaSSL Intel AES-NI support, if available} {
    configure.args-append \
        --enable-aesni
}

variant sniffer description {Enable CyaSSL sniffer support} {
    depends_lib-append \
        port:libpcap
    configure.args-append \
        --enable-sniffer
}

patchfiles      honor_cflags.patch

use_autoreconf  yes
autoreconf.args -fvi

livecheck.url   http://yassl.com/yaSSL/download/downloadForm.php
livecheck.regex "${name}-((?!.*${name}.*|\\${extract.suffix}).*)\\${extract.suffix}"
