# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 131917 2015-01-20 23:26:23Z mf2k@macports.org $

PortSystem          1.0

name                osh
version             20150115
categories          shells
license             BSD BSD-old
maintainers         v6shell.org:jan+mp
description         Ports of the Sixth Edition (V6) UNIX Thompson shell
long_description    The osh package provides two ports of the original /bin/sh \
                    from Sixth Edition (V6) UNIX (circa 1975). Osh is an enhanced \
                    port of the shell, and sh6 is an unenhanced port of the shell. \
                    This package also includes the following shell utilities \
                    for use by sh6: glob, if, goto, and fd2.
conflicts           omake
platforms           darwin
homepage            http://v6shell.org/
master_sites        ${homepage}src/

checksums           md5     14f49cf7e9bc74db86c8fcb5be840e5c \
                    sha1    1876e56b82ebad814aa74c62a2fb8a93947e2a65 \
                    rmd160  2a59928d33700eef4e0fe84699aa98bb6b392784 \
                    sha256  711151f222a7f3e7cb9500d11ded7bb19a66f94641f352e0ccb316dd9665aa1d

use_configure       no
use_parallel_build  yes

build.args          PREFIX=${prefix}

# Ensure use of the correct build utilities.
build.args-append   CC=${configure.cc} CPP=${configure.cpp}

variant universal   {}

# Ensure use of the correct build_arch.
build.args-append   OSXCFLAGS="[get_canonical_archflags cc]" \
                    OSXLDFLAGS="[get_canonical_archflags ld]"

destroot.args       PREFIX=${prefix}
destroot.target     install install-doc install-exp

livecheck.type      regex
livecheck.url       ${master_sites}
livecheck.regex     ${name}-(\\d{8})${extract.suffix}
