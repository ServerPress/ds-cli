From f03cc278c6cce0cf721adf9c3764d3c5fba63392 Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
Date: Sat, 5 Apr 2014 15:50:28 -0700
Subject: [PATCH 3/3] darwin: Use OSByteOrder.h rather than CF.

Signed-off-by: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
---
 configure.ac               | 2 +-
 cursor/parse_cursor_file.c | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/configure.ac b/configure.ac
index 7b45299..94798d8 100644
--- a/configure.ac
+++ b/configure.ac
@@ -19,7 +19,7 @@ XCB_UTIL_COMMON([1.4], [1.6])
 
 AM_MISSING_PROG([GPERF], [gperf])
 
-AC_CHECK_HEADERS([endian.h sys/endian.h sys/byteorder.h CoreFoundation/CoreFoundation.h], [break])
+AC_CHECK_HEADERS([endian.h sys/endian.h sys/byteorder.h libkern/OSByteOrder.h], [break])
 AC_CHECK_FUNCS([le32toh])
 
 PKG_CHECK_MODULES(XCB_RENDER, xcb-render)
diff --git a/cursor/parse_cursor_file.c b/cursor/parse_cursor_file.c
index 0226b01..21f72bf 100644
--- a/cursor/parse_cursor_file.c
+++ b/cursor/parse_cursor_file.c
@@ -48,9 +48,9 @@
 # ifndef HAVE_LE32TOH
 #  define le32toh(x) LE_32(x)
 # endif
-#elif defined(HAVE_COREFOUNDATION_COREFOUNDATION_H)
-#include <CoreFoundation/CoreFoundation.h>
-#define le32toh(x) CFSwapInt32LittleToHost(x)
+#elif defined(HAVE_LIBKERN_OSBYTEORDER_H)
+#include <libkern/OSByteOrder.h>
+#define le32toh(x) OSSwapLittleToHostInt32(x)
 #endif
 
 #include <xcb/xcb.h>
-- 
1.9.1

