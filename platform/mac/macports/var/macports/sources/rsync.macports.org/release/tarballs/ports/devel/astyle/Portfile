# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 123878 2014-08-15 13:45:23Z jmr@macports.org $

PortSystem          1.0

name                astyle
version             2.04
categories          devel
license             LGPL-3+
platforms           darwin
maintainers         wyuenho openmaintainer

description         source code beautifier for the C, C++, C# and Java programming languages
long_description    Artistic Style is a source code indenter, source code formatter, \
                    and source code beautifier for the C, C++, C# and Java \
                    programming languages.

homepage            http://astyle.sourceforge.net
master_sites        sourceforge::macosx
distfiles           ${name}_${version}_macosx.tar.gz:macosx
checksums           rmd160  3acff3f6d604c50a4762db9bce8c5cb18088c4a0 \
                    sha256  e0ba90723463172fd8a063897092284993eeebb87c63cf26ee36f555b0d89368

worksrcdir          ${name}/build/mac
patchfiles          patch-Makefile.diff
use_configure       no
conflicts           astyle-dev

variant universal   {}

build.target        release
build.args-append   prefix=${prefix} \
                    CXX="${configure.cxx} [get_canonical_archflags cxx]"

destroot.args-append \
                    prefix=${prefix} \
                    CXX="${configure.cxx} [get_canonical_archflags cxx]"

variant lib description {Build and install the libraries} {
    build.target-append shared static
    destroot.target-append install-lib
}

variant java description {Build and install the JNI library} {
    build.target-append java
    destroot.target-append install-jnilib
}

livecheck.regex     "[quotemeta $name] (\\d+(\\.\\d+)*)"
