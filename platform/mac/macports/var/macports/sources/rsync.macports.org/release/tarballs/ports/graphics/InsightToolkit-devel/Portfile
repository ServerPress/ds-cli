# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 137932 2015-06-23 10:13:39Z stromnov@macports.org $

PortSystem          1.0
PortGroup           cmake 1.0

name                InsightToolkit-devel
version             4.7.2
revision            0
categories          graphics devel
platforms           darwin
license             Apache

maintainers         stromnov openmaintainer

description         Insight Segmentation and Registration Toolkit (ITK)

long_description    Insight Segmentation and Registration Toolkit (ITK) \
                    is an open-source, cross-platform system that provides \
                    developers with an extensive suite of software tools \
                    for image analysis.

homepage            http://www.itk.org
master_sites        sourceforge:itk

distname            InsightToolkit-${version}

checksums           rmd160  b3d6fe5338008795f7d1bb58398385fb09b20cdd \
                    sha256  5aa385cc45ceff45c3265557d1b1bae4c3351d443c1e9ec19dfc110966786a91

patchfiles-append   patch-CMakeLists.txt.diff

cmake.out_of_source yes

depends_build-append \
                    port:gccxml-devel \
                    port:swig

depends_lib-append  port:dcmtk \
                    port:expat \
                    port:fftw-3 \
                    port:hdf5 \
                    port:jpeg \
                    port:minc \
                    port:libpng \
                    port:tiff \
                    port:vxl \
                    port:zlib

configure.args-append \
                    -DITK_FORBID_DOWNLOADS:BOOL=ON \
                    -DITK_WRAP_PYTHON:BOOL=OFF \
                    -DBUILD_SHARED_LIBS:BOOL=ON \
                    -DBUILD_EXAMPLES:BOOL=OFF \
                    -DVXL_DIR=${prefix}/share/vxl/cmake \
                    -DITK_USE_GPU:BOOL=ON \
                    -DITK_USE_SYSTEM_DCMTK:BOOL=ON \
                    -DITK_USE_SYSTEM_DOUBLECONVERSION:BOOL=OFF \
                    -DITK_USE_SYSTEM_EXPAT:BOOL=ON \
                    -DITK_USE_SYSTEM_FFTW:BOOL=ON \
                    -DITK_USE_SYSTEM_GCCXML:BOOL=ON \
                    -DITK_USE_SYSTEM_GDCM:BOOL=OFF \
                    -DITK_USE_SYSTEM_HDF:BOOL=ON \
                    -DITK_USE_SYSTEM_JPEG:BOOL=ON \
                    -DITK_USE_SYSTEM_MINC:BOOL=ON \
                    -DITK_USE_SYSTEM_PNG:BOOL=ON \
                    -DITK_USE_SYSTEM_SWIG:BOOL=ON \
                    -DITK_USE_SYSTEM_SZIP:BOOL=ON \
                    -DITK_USE_SYSTEM_TIFF:BOOL=ON \
                    -DITK_USE_SYSTEM_VXL:BOOL=ON \
                    -DITK_USE_SYSTEM_ZLIB:BOOL=ON

configure.ldflags-append \
                    -L${prefix}/lib/vxl

livecheck.type      regex
livecheck.url       http://www.itk.org/ITK/resources/software.html
livecheck.regex     {InsightToolkit-(\d+(?:\.\d+)*)\.[tz]}
