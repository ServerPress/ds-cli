# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 140800 2015-10-03 08:57:52Z stromnov@macports.org $

PortSystem          1.0
PortGroup           cmake 1.0

name                InsightToolkit-devel
version             4.8.1
revision            0
categories          graphics devel
platforms           darwin
license             Apache

maintainers         stromnov openmaintainer

description         Insight Segmentation and Registration Toolkit (ITK)

long_description    Insight Segmentation and Registration Toolkit (ITK) \
                    is an open-source, cross-platform system that provides \
                    developers with an extensive suite of software tools \
                    for image analysis.

homepage            http://www.itk.org
master_sites        sourceforge:itk

distname            InsightToolkit-${version}

checksums           rmd160  6bd0cd8535fc198162fb57c7fd57831c0339161a \
                    sha256  1aff73f6e2f43e06814258f2ebaec5e1010316c8d7d72ecb2944a85661f6303d

patchfiles-append   patch-CMakeLists.txt.diff

cmake.out_of_source yes

depends_build-append \
                    port:castxml \
                    port:swig

depends_lib-append  port:dcmtk \
                    port:expat \
                    port:fftw-3 \
                    port:hdf5 \
                    port:jpeg \
                    port:libpng \
                    port:tiff \
                    port:vxl \
                    port:zlib

configure.args-append \
                    -DITK_FORBID_DOWNLOADS:BOOL=ON \
                    -DITK_WRAP_PYTHON:BOOL=OFF \
                    -DBUILD_SHARED_LIBS:BOOL=ON \
                    -DBUILD_EXAMPLES:BOOL=OFF \
                    -DVXL_DIR=${prefix}/share/vxl/cmake \
                    -DITK_USE_GPU:BOOL=ON \
                    -DITK_USE_SYSTEM_LIBRARIES:BOOL=ON \
                    -DITK_USE_SYSTEM_DCMTK:BOOL=ON \
                    -DITK_USE_SYSTEM_DOUBLECONVERSION:BOOL=OFF \
                    -DITK_USE_SYSTEM_EXPAT:BOOL=ON \
                    -DITK_USE_SYSTEM_FFTW:BOOL=ON \
                    -DITK_USE_SYSTEM_CASTXML:BOOL=ON \
                    -DITK_USE_SYSTEM_GDCM:BOOL=OFF \
                    -DITK_USE_SYSTEM_HDF:BOOL=ON \
                    -DITK_USE_SYSTEM_JPEG:BOOL=ON \
                    -DITK_USE_SYSTEM_MINC:BOOL=OFF \
                    -DITK_USE_SYSTEM_PNG:BOOL=ON \
                    -DITK_USE_SYSTEM_SWIG:BOOL=ON \
                    -DITK_USE_SYSTEM_SZIP:BOOL=ON \
                    -DITK_USE_SYSTEM_TIFF:BOOL=ON \
                    -DITK_USE_SYSTEM_VXL:BOOL=ON \
                    -DITK_USE_SYSTEM_ZLIB:BOOL=ON

configure.ldflags-append \
                    -L${prefix}/lib/vxl

livecheck.type      regex
livecheck.url       http://www.itk.org/ITK/resources/software.html
livecheck.regex     {InsightToolkit-(\d+(?:\.\d+)*)\.[tz]}
