<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>config API</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>config API</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>The config API gives callers a way to access Git configuration files
(and files which have the same syntax). See <a href="../git-config.html">git-config(1)</a> for a
discussion of the config file syntax.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_general_usage">General Usage</h2>
<div class="sectionbody">
<div class="paragraph"><p>Config files are parsed linearly, and each variable found is passed to a
caller-provided callback function. The callback function is responsible
for any actions to be taken on the config option, and is free to ignore
some options. It is not uncommon for the configuration to be parsed
several times during the run of a Git program, with different callbacks
picking out different variables useful to themselves.</p></div>
<div class="paragraph"><p>A config callback function takes three parameters:</p></div>
<div class="ulist"><ul>
<li>
<p>
the name of the parsed variable. This is in canonical "flat" form: the
  section, subsection, and variable segments will be separated by dots,
  and the section and variable segments will be all lowercase. E.g.,
  <code>core.ignorecase</code>, <code>diff.SomeType.textconv</code>.
</p>
</li>
<li>
<p>
the value of the found variable, as a string. If the variable had no
  value specified, the value will be NULL (typically this means it
  should be interpreted as boolean true).
</p>
</li>
<li>
<p>
a void pointer passed in by the caller of the config API; this can
  contain callback-specific data
</p>
</li>
</ul></div>
<div class="paragraph"><p>A config callback should return 0 for success, or -1 if the variable
could not be parsed properly.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_config_querying">Basic Config Querying</h2>
<div class="sectionbody">
<div class="paragraph"><p>Most programs will simply want to look up variables in all config files
that Git knows about, using the normal precedence rules. To do this,
call <code>git_config</code> with a callback function and void data pointer.</p></div>
<div class="paragraph"><p><code>git_config</code> will read all config sources in order of increasing
priority. Thus a callback should typically overwrite previously-seen
entries with new ones (e.g., if both the user-wide <code>~/.gitconfig</code> and
repo-specific <code>.git/config</code> contain <code>color.ui</code>, the config machinery
will first feed the user-wide one to the callback, and then the
repo-specific one; by overwriting, the higher-priority repo-specific
value is left at the end).</p></div>
<div class="paragraph"><p>The <code>git_config_with_options</code> function lets the caller examine config
while adjusting some of the default behavior of <code>git_config</code>. It should
almost never be used by "regular" Git code that is looking up
configuration variables. It is intended for advanced callers like
<code>git-config</code>, which are intentionally tweaking the normal config-lookup
process. It takes two extra parameters:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>filename</code>
</dt>
<dd>
<p>
If this parameter is non-NULL, it specifies the name of a file to
parse for configuration, rather than looking in the usual files. Regular
<code>git_config</code> defaults to <code>NULL</code>.
</p>
</dd>
<dt class="hdlist1">
<code>respect_includes</code>
</dt>
<dd>
<p>
Specify whether include directives should be followed in parsed files.
Regular <code>git_config</code> defaults to <code>1</code>.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>There is a special version of <code>git_config</code> called <code>git_config_early</code>.
This version takes an additional parameter to specify the repository
config, instead of having it looked up via <code>git_path</code>. This is useful
early in a Git program before the repository has been found. Unless
you&#8217;re working with early setup code, you probably don&#8217;t want to use
this.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_reading_specific_files">Reading Specific Files</h2>
<div class="sectionbody">
<div class="paragraph"><p>To read a specific file in git-config format, use
<code>git_config_from_file</code>. This takes the same callback and data parameters
as <code>git_config</code>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_querying_for_specific_variables">Querying For Specific Variables</h2>
<div class="sectionbody">
<div class="paragraph"><p>For programs wanting to query for specific variables in a non-callback
manner, the config API provides two functions <code>git_config_get_value</code>
and <code>git_config_get_value_multi</code>. They both read values from an internal
cache generated previously from reading the config files.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>int git_config_get_value(const char *key, const char **value)</code>
</dt>
<dd>
<p>
        Finds the highest-priority value for the configuration variable <code>key</code>,
        stores the pointer to it in <code>value</code> and returns 0. When the
        configuration variable <code>key</code> is not found, returns 1 without touching
        <code>value</code>. The caller should not free or modify <code>value</code>, as it is owned
        by the cache.
</p>
</dd>
<dt class="hdlist1">
<code>const struct string_list *git_config_get_value_multi(const char *key)</code>
</dt>
<dd>
<p>
        Finds and returns the value list, sorted in order of increasing priority
        for the configuration variable <code>key</code>. When the configuration variable
        <code>key</code> is not found, returns NULL. The caller should not free or modify
        the returned pointer, as it is owned by the cache.
</p>
</dd>
<dt class="hdlist1">
<code>void git_config_clear(void)</code>
</dt>
<dd>
<p>
        Resets and invalidates the config cache.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>The config API also provides type specific API functions which do conversion
as well as retrieval for the queried variable, including:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>int git_config_get_int(const char *key, int *dest)</code>
</dt>
<dd>
<p>
        Finds and parses the value to an integer for the configuration variable
        <code>key</code>. Dies on error; otherwise, stores the value of the parsed integer in
        <code>dest</code> and returns 0. When the configuration variable <code>key</code> is not found,
        returns 1 without touching <code>dest</code>.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_ulong(const char *key, unsigned long *dest)</code>
</dt>
<dd>
<p>
        Similar to <code>git_config_get_int</code> but for unsigned longs.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_bool(const char *key, int *dest)</code>
</dt>
<dd>
<p>
        Finds and parses the value into a boolean value, for the configuration
        variable <code>key</code> respecting keywords like "true" and "false". Integer
        values are converted into true/false values (when they are non-zero or
        zero, respectively). Other values cause a die(). If parsing is successful,
        stores the value of the parsed result in <code>dest</code> and returns 0. When the
        configuration variable <code>key</code> is not found, returns 1 without touching
        <code>dest</code>.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_bool_or_int(const char *key, int *is_bool, int *dest)</code>
</dt>
<dd>
<p>
        Similar to <code>git_config_get_bool</code>, except that integers are copied as-is,
        and <code>is_bool</code> flag is unset.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_maybe_bool(const char *key, int *dest)</code>
</dt>
<dd>
<p>
        Similar to <code>git_config_get_bool</code>, except that it returns -1 on error
        rather than dying.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_string_const(const char *key, const char **dest)</code>
</dt>
<dd>
<p>
        Allocates and copies the retrieved string into the <code>dest</code> parameter for
        the configuration variable <code>key</code>; if NULL string is given, prints an
        error message and returns -1. When the configuration variable <code>key</code> is
        not found, returns 1 without touching <code>dest</code>.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_string(const char *key, char **dest)</code>
</dt>
<dd>
<p>
        Similar to <code>git_config_get_string_const</code>, except that retrieved value
        copied into the <code>dest</code> parameter is a mutable string.
</p>
</dd>
<dt class="hdlist1">
<code>int git_config_get_pathname(const char *key, const char **dest)</code>
</dt>
<dd>
<p>
        Similar to <code>git_config_get_string</code>, but expands <code>~</code> or <code>~user</code> into
        the user&#8217;s home directory when found at the beginning of the path.
</p>
</dd>
<dt class="hdlist1">
<code>git_die_config(const char *key, const char *err, ...)</code>
</dt>
<dd>
<p>
        First prints the error message specified by the caller in <code>err</code> and then
        dies printing the line number and the file name of the highest priority
        value for the configuration variable <code>key</code>.
</p>
</dd>
<dt class="hdlist1">
<code>void git_die_config_linenr(const char *key, const char *filename, int linenr)</code>
</dt>
<dd>
<p>
        Helper function which formats the die error message according to the
        parameters entered. Used by <code>git_die_config()</code>. It can be used by callers
        handling <code>git_config_get_value_multi()</code> to print the correct error message
        for the desired value.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>See test-config.c for usage examples.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_value_parsing_helpers">Value Parsing Helpers</h2>
<div class="sectionbody">
<div class="paragraph"><p>To aid in parsing string values, the config API provides callbacks with
a number of helper functions, including:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>git_config_int</code>
</dt>
<dd>
<p>
Parse the string to an integer, including unit factors. Dies on error;
otherwise, returns the parsed result.
</p>
</dd>
<dt class="hdlist1">
<code>git_config_ulong</code>
</dt>
<dd>
<p>
Identical to <code>git_config_int</code>, but for unsigned longs.
</p>
</dd>
<dt class="hdlist1">
<code>git_config_bool</code>
</dt>
<dd>
<p>
Parse a string into a boolean value, respecting keywords like "true" and
"false". Integer values are converted into true/false values (when they
are non-zero or zero, respectively). Other values cause a die(). If
parsing is successful, the return value is the result.
</p>
</dd>
<dt class="hdlist1">
<code>git_config_bool_or_int</code>
</dt>
<dd>
<p>
Same as <code>git_config_bool</code>, except that integers are returned as-is, and
an <code>is_bool</code> flag is unset.
</p>
</dd>
<dt class="hdlist1">
<code>git_config_maybe_bool</code>
</dt>
<dd>
<p>
Same as <code>git_config_bool</code>, except that it returns -1 on error rather
than dying.
</p>
</dd>
<dt class="hdlist1">
<code>git_config_string</code>
</dt>
<dd>
<p>
Allocates and copies the value string into the <code>dest</code> parameter; if no
string is given, prints an error message and returns -1.
</p>
</dd>
<dt class="hdlist1">
<code>git_config_pathname</code>
</dt>
<dd>
<p>
Similar to <code>git_config_string</code>, but expands <code>~</code> or <code>~user</code> into the
user&#8217;s home directory when found at the beginning of the path.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_include_directives">Include Directives</h2>
<div class="sectionbody">
<div class="paragraph"><p>By default, the config parser does not respect include directives.
However, a caller can use the special <code>git_config_include</code> wrapper
callback to support them. To do so, you simply wrap your "real" callback
function and data pointer in a <code>struct config_include_data</code>, and pass
the wrapper to the regular config-reading functions. For example:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>int read_file_with_include(const char *file, config_fn_t fn, void *data)
{
        struct config_include_data inc = CONFIG_INCLUDE_INIT;
        inc.fn = fn;
        inc.data = data;
        return git_config_from_file(git_config_include, file, &amp;inc);
}</code></pre>
</div></div>
<div class="paragraph"><p><code>git_config</code> respects includes automatically. The lower-level
<code>git_config_from_file</code> does not.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_configsets">Custom Configsets</h2>
<div class="sectionbody">
<div class="paragraph"><p>A <code>config_set</code> can be used to construct an in-memory cache for
config-like files that the caller specifies (i.e., files like <code>.gitmodules</code>,
<code>~/.gitconfig</code> etc.). For example,</p></div>
<div class="listingblock">
<div class="content">
<pre><code>struct config_set gm_config;
git_configset_init(&amp;gm_config);
int b;
/* we add config files to the config_set */
git_configset_add_file(&amp;gm_config, ".gitmodules");
git_configset_add_file(&amp;gm_config, ".gitmodules_alt");

if (!git_configset_get_bool(gm_config, "submodule.frotz.ignore", &amp;b)) {
        /* hack hack hack */
}

/* when we are done with the configset */
git_configset_clear(&amp;gm_config);</code></pre>
</div></div>
<div class="paragraph"><p>Configset API provides functions for the above mentioned work flow, including:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>void git_configset_init(struct config_set *cs)</code>
</dt>
<dd>
<p>
        Initializes the config_set <code>cs</code>.
</p>
</dd>
<dt class="hdlist1">
<code>int git_configset_add_file(struct config_set *cs, const char *filename)</code>
</dt>
<dd>
<p>
        Parses the file and adds the variable-value pairs to the <code>config_set</code>,
        dies if there is an error in parsing the file. Returns 0 on success, or
        -1 if the file does not exist or is inaccessible. The user has to decide
        if he wants to free the incomplete configset or continue using it when
        the function returns -1.
</p>
</dd>
<dt class="hdlist1">
<code>int git_configset_get_value(struct config_set *cs, const char *key, const char **value)</code>
</dt>
<dd>
<p>
        Finds the highest-priority value for the configuration variable <code>key</code>
        and config set <code>cs</code>, stores the pointer to it in <code>value</code> and returns 0.
        When the configuration variable <code>key</code> is not found, returns 1 without
        touching <code>value</code>. The caller should not free or modify <code>value</code>, as it
        is owned by the cache.
</p>
</dd>
<dt class="hdlist1">
<code>const struct string_list *git_configset_get_value_multi(struct config_set *cs, const char *key)</code>
</dt>
<dd>
<p>
        Finds and returns the value list, sorted in order of increasing priority
        for the configuration variable <code>key</code> and config set <code>cs</code>. When the
        configuration variable <code>key</code> is not found, returns NULL. The caller
        should not free or modify the returned pointer, as it is owned by the cache.
</p>
</dd>
<dt class="hdlist1">
<code>void git_configset_clear(struct config_set *cs)</code>
</dt>
<dd>
<p>
        Clears <code>config_set</code> structure, removes all saved variable-value pairs.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>In addition to above functions, the <code>config_set</code> API provides type specific
functions in the vein of <code>git_config_get_int</code> and family but with an extra
parameter, pointer to struct <code>config_set</code>.
They all behave similarly to the <code>git_config_get*()</code> family described in
"Querying For Specific Variables" above.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_config_files">Writing Config Files</h2>
<div class="sectionbody">
<div class="paragraph"><p>Git gives multiple entry points in the Config API to write config values to
files namely <code>git_config_set_in_file</code> and <code>git_config_set</code>, which write to
a specific config file or to <code>.git/config</code> respectively. They both take a
key/value pair as parameter.
In the end they both call <code>git_config_set_multivar_in_file</code> which takes four
parameters:</p></div>
<div class="ulist"><ul>
<li>
<p>
the name of the file, as a string, to which key/value pairs will be written.
</p>
</li>
<li>
<p>
the name of key, as a string. This is in canonical "flat" form: the section,
  subsection, and variable segments will be separated by dots, and the section
  and variable segments will be all lowercase.
  E.g., <code>core.ignorecase</code>, <code>diff.SomeType.textconv</code>.
</p>
</li>
<li>
<p>
the value of the variable, as a string. If value is equal to NULL, it will
  remove the matching key from the config file.
</p>
</li>
<li>
<p>
the value regex, as a string. It will disregard key/value pairs where value
  does not match.
</p>
</li>
<li>
<p>
a multi_replace value, as an int. If value is equal to zero, nothing or only
  one matching key/value is replaced, else all matching key/values (regardless
  how many) are removed, before the new pair is written.
</p>
</li>
</ul></div>
<div class="paragraph"><p>It returns 0 on success.</p></div>
<div class="paragraph"><p>Also, there are functions <code>git_config_rename_section</code> and
<code>git_config_rename_section_in_file</code> with parameters <code>old_name</code> and <code>new_name</code>
for renaming or removing sections in the config files. If NULL is passed
through <code>new_name</code> parameter, the section will be removed from the config file.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-12-30 16:07:05 PST
</div>
</div>
</body>
</html>
